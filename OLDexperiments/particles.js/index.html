<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Particles.js test</title>
</head>

<body>

<script type="text/javascript">

// Recursive Fractal Function
function defineFractalPath(startX, startY){
    context.translate(startX, startY);
    drawLine(0, 0, 0, -branchLength);
    drawDot(0,0,dotRadius);
    //--------------------------------

    if(currentDepth > 0 ){
        currentDepth--;
        context.translate(0, -branchLength);

        angle += fractalProportion;
        branchLength *= fractalProportion;

        // // Draw Right Branch
        // context.save();
        // context.rotate(angle * Math.PI / 180);
        // defineFractalPath(0, 0, depth);
        // context.restore();

        // Draw Left Branch
        context.save();
        context.rotate(-angle * Math.PI / 180);
        defineFractalPath(0, 0, currentDepth);
        context.restore();
    }
}
//
// function animateParticle(){
//
//     context.translate(startX, startY);
//
//     drawDot(dotX, dotY, dotRadius);
//     //--------------------------------
//
//     if(depth > 0 ){
//         depth--;
//         context.translate(0, -branchLength);
//
//         angle += fractalProportion;
//         branchLength *= fractalProportion;
//
//         // Draw Left Branch
//         // context.save();
//         context.rotate(-angle * Math.PI / 180);
//         // defineFractalPath(0, 0, depth);
//         // context.restore();
//
//         dotX = 0;
//         dotY = 0;
//     }
//
//     requestAnimationFrame(animateParticle);
// }

//----------------------------------------------------------------------
// Helper Functions

// draws a Line from (x1,y1) to (x2,y2)
function drawLine(x1, y1, x2, y2){
    context.beginPath();

    context.moveTo(x1,y1);
    context.lineTo(x2, y2);

    context.closePath();
    context.stroke();
}

// draws a Dot on (x,y) with a radius r
function drawDot(x,y,r) {
    context.beginPath();
    context.arc(x, y, r, 0, 2*Math.PI, false);
    context.stroke();
}

// Creates a Canvas elements and appends it to the body
function createCanvasDomElement(){
    var bodyDomElement = document.getElementsByTagName("BODY")[0],
        canvas = document.createElement("canvas");

    canvas.width = 400;
    canvas.height = 300;

    // Append the canvas element to the DOM
    bodyDomElement.appendChild(canvas);

    // Apply basic styles to the Canvas Element
    canvas.style.border = 'solid 1px #000';
}

//----------------------------------------------------------------------
// Render Loop Main Functions: Setup, Update and Draw
function update(){
    if(currentDepth>0){
        currentDepth--;
    }
    else {
        currentDepth = initialDepth;
    }
}

function draw(){

}

function renderLoop(){

    update();

    draw();

    requestAnimationFrame(renderLoop);
    // defineFractalPath(canvasHalfWidth, canvas.height);

    // animateParticle();

}

//----------------------------------------------------------------------
// Create and setup initial variables
createCanvasDomElement();

// Initial Setup - Global Variables
var canvas = document.getElementsByTagName('CANVAS')[0],
    context = canvas.getContext('2d'),
    initialDepth = 10,
    currentDepth = initialDepth,
    startX = canvas.width/2,
    startY = canvas.height,
    dotX = startX,
    dotY = startY,
    fractalProportion = 0.8,
    branchLength = 55,
    dotRadius = 7,
    angle = 8,
    fractalPath = [];

defineFractalPath(startX, startY );
//----------------------------------------------------------------------
// Begin Render Loop
renderLoop();

</script>

</body>

</html>
