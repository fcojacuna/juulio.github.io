<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HTML5 Canvas - Fractal Binary Tree</title>
</head>

<body style="margin:0">
    <canvas id="canvas" width="400" height="300" style="border:1px solid;margin:0 auto;display:block;"> No HTML5 Canvas detected!
    </canvas>

    <script type="text/javascript">

        function drawLine(x1, y1, x2, y2){
            context.beginPath();

            context.moveTo(x1,y1);
            context.lineTo(x2, y2);

            context.closePath();
            context.stroke();
        }

        function drawDot(x,y,r) {
            context.beginPath();
            context.arc(x, y, r, 0, 2*Math.PI, false);
            context.stroke();
        }

        // Initial Setup
        var canvas = document.getElementById('canvas'),
            context = canvas.getContext('2d'),
            canvasHalfWidth = canvas.width/2,
            fractalProportion = 0.8,
            branchLength = 50,
            angle = 30 * Math.PI / 180;

        // Recursive Fractal Function
        function drawTree(startX, startY, branchLength, angle, depth, lineWidth){
            context.lineWidth = lineWidth;
            context.translate(startX, startY);

            drawLine(0, 0, 0, -branchLength);

            //--------------------------------

            if(depth > 0 ){
                depth--;
                context.translate(0, -branchLength);

                angle += fractalProportion;
                lineWidth *= fractalProportion;
                branchLength *= fractalProportion;

                context.save();

                // Draw Right Branch
                context.rotate(angle * Math.PI / 180);
                //drawLine(x1, y1, x2, y2);
                drawTree(0, 0, branchLength, angle, depth, lineWidth);


                context.restore();
                context.save();

                // Draw Left Branch
                context.rotate(-angle * Math.PI / 180);
                //drawLine(x1, y1, x2, y2);
                drawTree(0, 0, branchLength, angle, depth, lineWidth);
                context.restore();
            }
        }

        function init(){

            drawTree(canvasHalfWidth, canvas.height, 70, 25, 10, 14);

        }

        init();

    </script>
</body>

</html>
